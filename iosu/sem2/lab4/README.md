# Lab 4: Процедуры и функции

```oraclesqlplus
GRANT CREATE ANY DIRECTORY TO TOOLSTORAGE;
-- Create directory on your computer to output the procedure results
CREATE OR REPLACE DIRECTORY REPORT_OUTPUT_DIR AS 'D:\bsuir\sem7\iosu\reports';

EXEC REPORT_MANUFACTURED_PRODUCTS(TO_DATE('2024-01-01', 'YYYY-MM-DD'), TO_DATE('2024-10-20', 'YYYY-MM-DD'), NULL, 'report.json');
```

## Task

При создании следует выполнить следующие минимальные требования к синтаксису:

- использовать явный курсор или курсорную переменную, а также атрибуты курсора;
- использовать пакет DBMS_OUTPUT для вывода результатов работы в SQL*Plus;
- предусмотреть секцию обработки исключительных ситуаций, причем обязательно использовать как предустановленные исключительные ситуации, так и собственные (например, стоит контролировать наличие в БД значений, передаваемых в процедуры и функции как параметры);

1. Написать процедуру, создающую отчет о движении инструментов за указанный в днях период:

Отчет за период с ... по ...

- инструмент1	поступление (ед. изм.)	количество используемого
- инструмент2	поступление (ед. изм.)	количество используемого

2. Функция

Создать функцию, которая возвращает пустую строку или строку «остатки», если инструмента на складе осталось меньше 100 единиц, а также выводит инструмент с минимальным количеством в остатке.

3. Процедура

Написать процедуру, создающую отчет об изготовленных изделиях за указанный в днях период.

Отчет за период с ... по ...

`product_title` `tm_number` `equipment_type_title` `produced_count` `defects_count` `std_dev`

- Создать локальную программу, изменив код ранее написанной процедуры или функции.
- Написать перегруженные программы, используя для этого ранее созданную процедуру или функцию.
- Объединить все процедуры и функции, в том числе перегруженные, в пакет.
- Написать анонимный PL/SQL-блок, в котором будут вызовы реализованных функций и процедур пакета с различными характерными значениями параметров для проверки правильности работы основных задач и обработки исключительных ситуаций.
